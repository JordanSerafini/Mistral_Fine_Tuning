{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments. Votre rôle est de comprendre les questions des utilisateurs, de les reformuler si nécessaire, et d'identifier l'intention pour rediriger vers l'agent spécialisé approprié."}, {"role": "user", "content": "Quels sont les chantiers prévus pour la semaine prochaine?"}, {"role": "assistant", "content": "1. Reformulation: Vous souhaitez connaître la liste des chantiers planifiés pour la semaine prochaine.\n\n2. Intention: Consultation du planning des chantiers à venir\n\n3. Agent spécialisé: querybuilder\n\n4. Requête générée:\n```sql\nSELECT \n    p.id AS project_id, \n    p.name AS nom_projet, \n    CONCAT(p.street_number, ' ', p.street_name, ', ', p.zip_code, ' ', p.city) AS adresse, \n    p.type AS type_travaux,\n    p.start_date AS date_debut,\n    p.end_date AS date_fin,\n    CONCAT(c.firstname, ' ', c.lastname) AS client,\n    ROUND(SUM(t.estimated_hours)) AS heures_totales_prevues,\n    COUNT(DISTINCT s.id) AS nombre_employes_assignes\nFROM \n    projects p\nLEFT JOIN \n    clients c ON p.client_id = c.id\nLEFT JOIN \n    tasks t ON p.id = t.project_id\nLEFT JOIN \n    project_staff ps ON p.id = ps.project_id\nLEFT JOIN \n    staff s ON ps.staff_id = s.id\nWHERE \n    p.start_date BETWEEN CURRENT_DATE + INTERVAL '7 days' AND CURRENT_DATE + INTERVAL '14 days'\n    OR (p.start_date <= CURRENT_DATE + INTERVAL '14 days' AND p.end_date >= CURRENT_DATE + INTERVAL '7 days')\nGROUP BY \n    p.id, c.firstname, c.lastname\nORDER BY \n    p.start_date ASC;\n```"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments. Votre rôle est de comprendre les questions des utilisateurs, de les reformuler si nécessaire, et d'identifier l'intention pour rediriger vers l'agent spécialisé approprié."}, {"role": "user", "content": "Je cherche tous les documents techniques concernant l'isolation thermique"}, {"role": "assistant", "content": "1. Reformulation: Vous recherchez l'ensemble des documents techniques relatifs à l'isolation thermique disponibles dans notre système.\n\n2. Intention: Recherche documentaire sur un sujet technique spécifique\n\n3. Agent spécialisé: elasticsearch\n\n4. Requête générée:\n```json\n{\n  \"index\": \"documents_techniques\",\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"categorie\": \"technique\"\n          }\n        },\n        {\n          \"multi_match\": {\n            \"query\": \"isolation thermique\",\n            \"fields\": [\"titre^3\", \"description^2\", \"contenu\", \"mots_cles^4\"],\n            \"type\": \"phrase_prefix\",\n            \"operator\": \"and\"\n          }\n        }\n      ],\n      \"filter\": [\n        {\n          \"term\": {\n            \"statut\": \"actif\"\n          }\n        }\n      ]\n    }\n  },\n  \"highlight\": {\n    \"fields\": {\n      \"contenu\": {}\n    }\n  },\n  \"sort\": [\n    { \"_score\": \"desc\" },\n    { \"date_publication\": \"desc\" }\n  ],\n  \"size\": 20\n}\n```"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments. Votre rôle est de comprendre les questions des utilisateurs, de les reformuler si nécessaire, et d'identifier l'intention pour rediriger vers l'agent spécialisé approprié."}, {"role": "user", "content": "Crée un devis pour M. Dupont pour la rénovation de sa salle de bain de 15m²"}, {"role": "assistant", "content": "1. Reformulation: Vous souhaitez générer un devis pour M. Dupont concernant la rénovation d'une salle de bain de 15m².\n\n2. Intention: Création d'un nouveau devis client pour des travaux spécifiques\n\n3. Agent spécialisé: workflow_agent\n\n4. Requête générée:\n```json\n{\n  \"action\": \"creer_devis\",\n  \"parametres\": {\n    \"client\": \"Dupont\",\n    \"type_travaux\": \"renovation\",\n    \"piece\": \"salle de bain\",\n    \"surface\": 15,\n    \"options_standard\": [\"plomberie\", \"carrelage\", \"sanitaires\", \"electricite\"],\n    \"date_creation\": \"CURRENT_DATE\",\n    \"validite_devis\": 30,\n    \"priorite\": \"normale\",\n    \"notifications\": [\"email\", \"systeme\"]\n  }\n}\n```"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments. Votre rôle est de comprendre les questions des utilisateurs, de les reformuler si nécessaire, et d'identifier l'intention pour rediriger vers l'agent spécialisé approprié."}, {"role": "user", "content": "Combien de sacs de ciment avons-nous en stock?"}, {"role": "assistant", "content": "1. Reformulation: Vous souhaitez connaître la quantité actuelle de sacs de ciment disponibles dans notre stock.\n\n2. Intention: Vérification du niveau de stock d'un matériau spécifique\n\n3. Agent spécialisé: querybuilder\n\n4. Requête générée:\n```sql\nSELECT \n    m.reference,\n    m.name AS designation,\n    m.brand AS marque,\n    m.unit AS unite_mesure,\n    m.quantity AS quantite_totale,\n    m.min_quantity AS seuil_alerte,\n    CASE \n        WHEN m.quantity <= m.min_quantity THEN 'ALERTE'\n        WHEN m.quantity <= m.min_quantity * 1.5 THEN 'ATTENTION'\n        ELSE 'OK'\n    END AS statut_stock\nFROM \n    materials m\nWHERE \n    m.category = 'ciment' AND\n    m.name LIKE '%sac%' AND\n    m.expiry_date > CURRENT_DATE\nGROUP BY \n    m.id, m.reference, m.name, m.brand, m.unit, m.min_quantity\nORDER BY \n    quantite_totale ASC;\n```"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments. Votre rôle est de comprendre les questions des utilisateurs, de les reformuler si nécessaire, et d'identifier l'intention pour rediriger vers l'agent spécialisé approprié."}, {"role": "user", "content": "Quels employés sont disponibles lundi prochain pour le chantier Dupont?"}, {"role": "assistant", "content": "1. Reformulation: Vous souhaitez connaître la liste des employés qui seront disponibles lundi prochain pour travailler sur le chantier Dupont.\n\n2. Intention: Vérification de la disponibilité des ressources humaines pour un chantier spécifique\n\n3. Agent spécialisé: querybuilder\n\n4. Requête générée:\n```sql\nSELECT \n    s.id AS staff_id,\n    s.lastname AS nom,\n    s.firstname AS prenom,\n    s.role AS fonction,\n    s.specialization AS specialite,\n    s.skill_level AS niveau_competence,\n    s.phone AS telephone\nFROM \n    staff s\nWHERE \n    s.is_active = TRUE\n    AND s.id NOT IN (\n        SELECT DISTINCT ps.staff_id\n        FROM project_staff ps\n        JOIN tasks t ON ps.project_id = t.project_id\n        JOIN projects p ON t.project_id = p.id\n        WHERE \n            t.scheduled_date = CURRENT_DATE + INTERVAL '7 days' - EXTRACT(DOW FROM CURRENT_DATE + INTERVAL '7 days')::integer + 1\n            AND p.name != 'Dupont'\n    )\n    AND s.id NOT IN (\n        SELECT staff_id\n        FROM staff_leaves\n        WHERE \n            start_date <= CURRENT_DATE + INTERVAL '7 days' - EXTRACT(DOW FROM CURRENT_DATE + INTERVAL '7 days')::integer + 1\n            AND end_date >= CURRENT_DATE + INTERVAL '7 days' - EXTRACT(DOW FROM CURRENT_DATE + INTERVAL '7 days')::integer + 1\n    )\nORDER BY \n    s.specialization, s.skill_level DESC;\n```"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie la livraison de matériaux lundi prochain."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une livraison de matériaux pour lundi prochain.\",\n    \"intention\": \"Gestion logistique - Planification livraison\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_livraison\",\n        \"parametres\": {\n            \"date\": \"lundi prochain\",\n            \"type\": \"matériaux\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est le taux d'occupation des équipes ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Calculer le taux d'occupation des équipes.\",\n    \"intention\": \"Ressources humaines - Taux d'occupation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.firstname, s.lastname, COUNT(ps.project_id) AS projets_assignés\\n                    FROM staff s\\n                    LEFT JOIN project_staff ps ON s.id = ps.staff_id\\n                    GROUP BY s.id, s.firstname, s.lastname\\n                    ORDER BY projets_assignés DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets en retard.\",\n    \"intention\": \"Suivi de projet - Projets en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.end_date, p.status,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours' AND p.end_date < CURRENT_DATE\\n                    ORDER BY p.end_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients ayant le plus de projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant le plus de projets.\",\n    \"intention\": \"Analyse client - Nombre de projets par client\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, COUNT(p.id) AS nombre_projets\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    GROUP BY c.id\\n                    ORDER BY nombre_projets DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie la livraison de matériaux lundi prochain."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une livraison de matériaux pour lundi prochain.\",\n    \"intention\": \"Gestion logistique - Planification livraison\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_livraison\",\n        \"parametres\": {\n            \"date\": \"lundi prochain\",\n            \"type\": \"matériaux\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est le taux d'occupation des équipes ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Calculer le taux d'occupation des équipes.\",\n    \"intention\": \"Ressources humaines - Taux d'occupation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.firstname, s.lastname, COUNT(ps.project_id) AS projets_assignés\\n                    FROM staff s\\n                    LEFT JOIN project_staff ps ON s.id = ps.staff_id\\n                    GROUP BY s.id, s.firstname, s.lastname\\n                    ORDER BY projets_assignés DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets en retard.\",\n    \"intention\": \"Suivi de projet - Projets en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.end_date, p.status,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours' AND p.end_date < CURRENT_DATE\\n                    ORDER BY p.end_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients ayant le plus de projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant le plus de projets.\",\n    \"intention\": \"Analyse client - Nombre de projets par client\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, COUNT(p.id) AS nombre_projets\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    GROUP BY c.id\\n                    ORDER BY nombre_projets DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie la livraison de matériaux lundi prochain."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une livraison de matériaux pour lundi prochain.\",\n    \"intention\": \"Gestion logistique - Planification livraison\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_livraison\",\n        \"parametres\": {\n            \"date\": \"lundi prochain\",\n            \"type\": \"matériaux\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est le taux d'occupation des équipes ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Calculer le taux d'occupation des équipes.\",\n    \"intention\": \"Ressources humaines - Taux d'occupation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.firstname, s.lastname, COUNT(ps.project_id) AS projets_assignés\\n                    FROM staff s\\n                    LEFT JOIN project_staff ps ON s.id = ps.staff_id\\n                    GROUP BY s.id, s.firstname, s.lastname\\n                    ORDER BY projets_assignés DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets en retard.\",\n    \"intention\": \"Suivi de projet - Projets en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.end_date, p.status,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours' AND p.end_date < CURRENT_DATE\\n                    ORDER BY p.end_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients ayant le plus de projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant le plus de projets.\",\n    \"intention\": \"Analyse client - Nombre de projets par client\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, COUNT(p.id) AS nombre_projets\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    GROUP BY c.id\\n                    ORDER BY nombre_projets DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie la livraison de matériaux lundi prochain."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une livraison de matériaux pour lundi prochain.\",\n    \"intention\": \"Gestion logistique - Planification livraison\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_livraison\",\n        \"parametres\": {\n            \"date\": \"lundi prochain\",\n            \"type\": \"matériaux\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est le taux d'occupation des équipes ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Calculer le taux d'occupation des équipes.\",\n    \"intention\": \"Ressources humaines - Taux d'occupation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.firstname, s.lastname, COUNT(ps.project_id) AS projets_assignés\\n                    FROM staff s\\n                    LEFT JOIN project_staff ps ON s.id = ps.staff_id\\n                    GROUP BY s.id, s.firstname, s.lastname\\n                    ORDER BY projets_assignés DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets en retard.\",\n    \"intention\": \"Suivi de projet - Projets en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.end_date, p.status,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours' AND p.end_date < CURRENT_DATE\\n                    ORDER BY p.end_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients ayant le plus de projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant le plus de projets.\",\n    \"intention\": \"Analyse client - Nombre de projets par client\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, COUNT(p.id) AS nombre_projets\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    GROUP BY c.id\\n                    ORDER BY nombre_projets DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie la livraison de matériaux lundi prochain."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une livraison de matériaux pour lundi prochain.\",\n    \"intention\": \"Gestion logistique - Planification livraison\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_livraison\",\n        \"parametres\": {\n            \"date\": \"lundi prochain\",\n            \"type\": \"matériaux\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est le taux d'occupation des équipes ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Calculer le taux d'occupation des équipes.\",\n    \"intention\": \"Ressources humaines - Taux d'occupation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.firstname, s.lastname, COUNT(ps.project_id) AS projets_assignés\\n                    FROM staff s\\n                    LEFT JOIN project_staff ps ON s.id = ps.staff_id\\n                    GROUP BY s.id, s.firstname, s.lastname\\n                    ORDER BY projets_assignés DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets en retard.\",\n    \"intention\": \"Suivi de projet - Projets en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.end_date, p.status,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours' AND p.end_date < CURRENT_DATE\\n                    ORDER BY p.end_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients ayant le plus de projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant le plus de projets.\",\n    \"intention\": \"Analyse client - Nombre de projets par client\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, COUNT(p.id) AS nombre_projets\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    GROUP BY c.id\\n                    ORDER BY nombre_projets DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les chantiers qui commencent demain ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les chantiers qui commencent demain.\",\n    \"intention\": \"Suivi de projet - Projets débutant bientôt\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.status, CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.start_date = CURRENT_DATE + INTERVAL '1 day'\\n                    ORDER BY p.name;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés disponibles cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les employés disponibles cette semaine.\",\n    \"intention\": \"Ressources humaines - Disponibilité des employés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, firstname, lastname, email, phone, role\\n                    FROM staff\\n                    WHERE is_available = TRUE\\n                    ORDER BY lastname;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les équipements nécessitant une maintenance ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les équipements nécessitant une maintenance ce mois-ci.\",\n    \"intention\": \"Gestion des équipements - Maintenance des équipements\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, status, last_maintenance_date, next_maintenance_date\\n                    FROM equipment\\n                    WHERE next_maintenance_date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '1 month'\\n                    ORDER BY next_maintenance_date;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Génère un rapport financier pour le mois dernier."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport financier pour le mois dernier.\",\n    \"intention\": \"Gestion financière - Rapport mensuel\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"financier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients avec des factures en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant des factures en retard.\",\n    \"intention\": \"Gestion financière - Factures impayées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT DISTINCT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, c.email, c.phone\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    JOIN invoices i ON p.id = i.project_id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY c.lastname, c.firstname;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus sollicités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les fournisseurs les plus sollicités.\",\n    \"intention\": \"Gestion des fournisseurs - Fréquence des commandes\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.name, COUNT(o.id) AS nombre_commandes\\n                    FROM suppliers s\\n                    JOIN supplier_orders o ON s.id = o.supplier_id\\n                    GROUP BY s.id\\n                    ORDER BY nombre_commandes DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les chantiers avec des dépassements budgétaires ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets ayant dépassé leur budget.\",\n    \"intention\": \"Suivi de projet - Dépassement budgétaire\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, pb.total_budget, \\n                           (SELECT SUM(i.total_ttc) FROM invoices i WHERE i.project_id = p.id) AS total_facture\\n                    FROM projects p\\n                    JOIN project_budgets pb ON p.id = pb.project_id\\n                    WHERE (SELECT SUM(i.total_ttc) FROM invoices i WHERE i.project_id = p.id) > pb.total_budget;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux les plus commandés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux les plus commandés.\",\n    \"intention\": \"Gestion des stocks - Matériaux populaires\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT m.id, m.name, SUM(pm.quantity) AS total_commandé\\n                    FROM materials m\\n                    JOIN project_materials pm ON m.id = pm.material_id\\n                    GROUP BY m.id\\n                    ORDER BY total_commandé DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés disponibles cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les employés disponibles cette semaine.\",\n    \"intention\": \"Ressources humaines - Disponibilité des employés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, firstname, lastname, email, phone, role\\n                    FROM staff\\n                    WHERE is_available = TRUE\\n                    AND updated_at >= DATE_TRUNC('week', CURRENT_DATE)\\n                    AND updated_at < DATE_TRUNC('week', CURRENT_DATE) + INTERVAL '7 days'\\n                    ORDER BY lastname;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés affectés à un projet spécifique ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés affectés à un projet spécifique ?\",\n    \"intention\": \"Ressources humaines - Affectations aux projets\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, p.name AS project_name\\n        FROM staff s\\n        JOIN project_staff ps ON s.id = ps.staff_id\\n        JOIN projects p ON ps.project_id = p.id\\n        WHERE p.id = $1;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'termine' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'termine' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis refusés ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les devis refusés ce mois-ci ?\",\n    \"intention\": \"Suivi des devis - Devis refusés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, project_id, created_date, total, status\\n        FROM quotations\\n        WHERE status = 'refusé'\\n          AND EXTRACT(MONTH FROM created_date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n          AND EXTRACT(YEAR FROM created_date) = EXTRACT(YEAR FROM CURRENT_DATE)\\n        ORDER BY created_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés affectés à un projet spécifique ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés affectés à un projet spécifique ?\",\n    \"intention\": \"Ressources humaines - Affectations aux projets\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, p.name AS project_name\\n        FROM staff s\\n        JOIN project_staff ps ON s.id = ps.staff_id\\n        JOIN projects p ON ps.project_id = p.id\\n        WHERE p.id = $1;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'termine' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'termine' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements effectués cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements effectués cette semaine ?\",\n    \"intention\": \"Gestion financière - Paiements récents\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.amount, p.payment_date, p.payment_method, i.reference AS facture\\n        FROM payments p\\n        JOIN invoices i ON p.invoice_id = i.id\\n        WHERE p.payment_date >= DATE_TRUNC('week', CURRENT_DATE)\\n        ORDER BY p.payment_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements effectués cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements effectués cette semaine ?\",\n    \"intention\": \"Gestion financière - Paiements récents\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.amount, p.payment_date, p.payment_method, i.reference AS facture\\n        FROM payments p\\n        JOIN invoices i ON p.invoice_id = i.id\\n        WHERE p.payment_date >= DATE_TRUNC('week', CURRENT_DATE)\\n        ORDER BY p.payment_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements effectués cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements effectués cette semaine ?\",\n    \"intention\": \"Gestion financière - Paiements récents\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.amount, p.payment_date, p.payment_method, i.reference AS facture\\n        FROM payments p\\n        JOIN invoices i ON p.invoice_id = i.id\\n        WHERE p.payment_date >= DATE_TRUNC('week', CURRENT_DATE)\\n        ORDER BY p.payment_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'termine' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'termine' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés affectés à un projet spécifique ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés affectés à un projet spécifique ?\",\n    \"intention\": \"Ressources humaines - Affectations aux projets\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, p.name AS project_name\\n        FROM staff s\\n        JOIN project_staff ps ON s.id = ps.staff_id\\n        JOIN projects p ON ps.project_id = p.id\\n        WHERE p.id = $1;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie la livraison de matériaux lundi prochain."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une livraison de matériaux pour lundi prochain.\",\n    \"intention\": \"Gestion logistique - Planification livraison\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_livraison\",\n        \"parametres\": {\n            \"date\": \"lundi prochain\",\n            \"type\": \"matériaux\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est le taux d'occupation des équipes ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Calculer le taux d'occupation des équipes.\",\n    \"intention\": \"Ressources humaines - Taux d'occupation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.firstname, s.lastname, COUNT(ps.project_id) AS projets_assignés\\n                    FROM staff s\\n                    LEFT JOIN project_staff ps ON s.id = ps.staff_id\\n                    GROUP BY s.id, s.firstname, s.lastname\\n                    ORDER BY projets_assignés DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets en retard.\",\n    \"intention\": \"Suivi de projet - Projets en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.end_date, p.status,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours' AND p.end_date < CURRENT_DATE\\n                    ORDER BY p.end_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients ayant le plus de projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant le plus de projets.\",\n    \"intention\": \"Analyse client - Nombre de projets par client\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, COUNT(p.id) AS nombre_projets\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    GROUP BY c.id\\n                    ORDER BY nombre_projets DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en cours ?\",\n    \"intention\": \"Suivi de projet - Projets en cours\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'en_cours'\\n                    ORDER BY p.start_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Trouve-moi un document sur les normes de sécurité BTP"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Chercher un document sur les normes de sécurité en BTP.\",\n    \"intention\": \"Recherche documentaire - Normes de sécurité\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"normes de sécurité BTP\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Planifie une réunion de chantier demain à 10h"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Planifier une réunion de chantier pour demain à 10h.\",\n    \"intention\": \"Gestion des événements - Planification réunion de chantier\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"planifier_evenement\",\n        \"parametres\": {\n            \"event_type\": \"reunion_chantier\",\n            \"date\": \"demain\",\n            \"heure\": \"10:00\",\n            \"participants\": \"équipe chantier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les paiements en retard.\",\n    \"intention\": \"Gestion financière - Paiements en retard\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT i.id, i.reference, i.issue_date, i.due_date, i.total_ttc, i.status,\\n                           c.firstname || ' ' || c.lastname AS client\\n                    FROM invoices i\\n                    JOIN projects p ON i.project_id = p.id\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY i.due_date ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets terminés le mois dernier ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets terminés le mois dernier.\",\n    \"intention\": \"Suivi de projet - Projets terminés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.description, p.start_date, p.end_date,\\n                           CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.status = 'termine'\\n                      AND EXTRACT(MONTH FROM p.end_date) = EXTRACT(MONTH FROM CURRENT_DATE - INTERVAL '1 month')\\n                      AND EXTRACT(YEAR FROM p.end_date) = EXTRACT(YEAR FROM CURRENT_DATE - INTERVAL '1 month')\\n                    ORDER BY p.end_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux en stock sous 5 unités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux ayant un stock inférieur à 5 unités.\",\n    \"intention\": \"Gestion des stocks - Matériaux en faible quantité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, description, unit, price, quantity\\n                    FROM materials\\n                    WHERE quantity < 5\\n                    ORDER BY quantity ASC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Recherchez-moi des documents sur la gestion des chantiers."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Rechercher des documents sur la gestion des chantiers.\",\n    \"intention\": \"Recherche documentaire - Gestion des chantiers\",\n    \"agent\": \"elasticsearch\",\n    \"requete\": {\n        \"index\": \"documents\",\n        \"query\": {\n            \"bool\": {\n                \"must\": [\n                    {\n                        \"match\": {\n                            \"content\": \"gestion des chantiers\"\n                        }\n                    }\n                ]\n            }\n        },\n        \"size\": 10\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis en attente de validation ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les devis en attente de validation.\",\n    \"intention\": \"Suivi des devis - Devis en attente\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, project_id, created_date, total, status\\n                    FROM quotations\\n                    WHERE status = 'en_attente'\\n                    ORDER BY created_date DESC;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les chantiers qui commencent demain ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les chantiers qui commencent demain.\",\n    \"intention\": \"Suivi de projet - Projets débutant bientôt\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, p.start_date, p.status, CONCAT(c.firstname, ' ', c.lastname) AS client\\n                    FROM projects p\\n                    JOIN clients c ON p.client_id = c.id\\n                    WHERE p.start_date = CURRENT_DATE + INTERVAL '1 day'\\n                    ORDER BY p.name;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés disponibles cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les employés disponibles cette semaine.\",\n    \"intention\": \"Ressources humaines - Disponibilité des employés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, firstname, lastname, email, phone, role\\n                    FROM staff\\n                    WHERE is_available = TRUE\\n                    ORDER BY lastname;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les équipements nécessitant une maintenance ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les équipements nécessitant une maintenance ce mois-ci.\",\n    \"intention\": \"Gestion des équipements - Maintenance des équipements\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, name, status, last_maintenance_date, next_maintenance_date\\n                    FROM equipment\\n                    WHERE next_maintenance_date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '1 month'\\n                    ORDER BY next_maintenance_date;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Génère un rapport financier pour le mois dernier."}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport financier pour le mois dernier.\",\n    \"intention\": \"Gestion financière - Rapport mensuel\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"financier\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les clients avec des factures en retard ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les clients ayant des factures en retard.\",\n    \"intention\": \"Gestion financière - Factures impayées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT DISTINCT c.id, CONCAT(c.firstname, ' ', c.lastname) AS client, c.email, c.phone\\n                    FROM clients c\\n                    JOIN projects p ON c.id = p.client_id\\n                    JOIN invoices i ON p.id = i.project_id\\n                    WHERE i.status = 'en_retard'\\n                    ORDER BY c.lastname, c.firstname;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus sollicités ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les fournisseurs les plus sollicités.\",\n    \"intention\": \"Gestion des fournisseurs - Fréquence des commandes\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT s.id, s.name, COUNT(o.id) AS nombre_commandes\\n                    FROM suppliers s\\n                    JOIN supplier_orders o ON s.id = o.supplier_id\\n                    GROUP BY s.id\\n                    ORDER BY nombre_commandes DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les chantiers avec des dépassements budgétaires ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les projets ayant dépassé leur budget.\",\n    \"intention\": \"Suivi de projet - Dépassement budgétaire\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT p.id, p.name, pb.total_budget, \\n                           (SELECT SUM(i.total_ttc) FROM invoices i WHERE i.project_id = p.id) AS total_facture\\n                    FROM projects p\\n                    JOIN project_budgets pb ON p.id = pb.project_id\\n                    WHERE (SELECT SUM(i.total_ttc) FROM invoices i WHERE i.project_id = p.id) > pb.total_budget;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux les plus commandés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les matériaux les plus commandés.\",\n    \"intention\": \"Gestion des stocks - Matériaux populaires\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT m.id, m.name, SUM(pm.quantity) AS total_commandé\\n                    FROM materials m\\n                    JOIN project_materials pm ON m.id = pm.material_id\\n                    GROUP BY m.id\\n                    ORDER BY total_commandé DESC\\n                    LIMIT 10;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés disponibles cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Lister les employés disponibles cette semaine.\",\n    \"intention\": \"Ressources humaines - Disponibilité des employés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"\\n                    SELECT id, firstname, lastname, email, phone, role\\n                    FROM staff\\n                    WHERE is_available = TRUE\\n                    AND updated_at >= DATE_TRUNC('week', CURRENT_DATE)\\n                    AND updated_at < DATE_TRUNC('week', CURRENT_DATE) + INTERVAL '7 days'\\n                    ORDER BY lastname;\\n                    \"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés affectés à un projet spécifique ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés affectés à un projet spécifique ?\",\n    \"intention\": \"Ressources humaines - Affectations aux projets\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, p.name AS project_name\\n        FROM staff s\\n        JOIN project_staff ps ON s.id = ps.staff_id\\n        JOIN projects p ON ps.project_id = p.id\\n        WHERE p.id = $1;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les devis refusés ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les devis refusés ce mois-ci ?\",\n    \"intention\": \"Suivi des devis - Devis refusés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, project_id, created_date, total, status\\n        FROM quotations\\n        WHERE status = 'refusé'\\n          AND EXTRACT(MONTH FROM created_date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n          AND EXTRACT(YEAR FROM created_date) = EXTRACT(YEAR FROM CURRENT_DATE)\\n        ORDER BY created_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés affectés à un projet spécifique ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés affectés à un projet spécifique ?\",\n    \"intention\": \"Ressources humaines - Affectations aux projets\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, p.name AS project_name\\n        FROM staff s\\n        JOIN project_staff ps ON s.id = ps.staff_id\\n        JOIN projects p ON ps.project_id = p.id\\n        WHERE p.id = $1;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements effectués cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements effectués cette semaine ?\",\n    \"intention\": \"Gestion financière - Paiements récents\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.amount, p.payment_date, p.payment_method, i.reference AS facture\\n        FROM payments p\\n        JOIN invoices i ON p.invoice_id = i.id\\n        WHERE p.payment_date >= DATE_TRUNC('week', CURRENT_DATE)\\n        ORDER BY p.payment_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements effectués cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements effectués cette semaine ?\",\n    \"intention\": \"Gestion financière - Paiements récents\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.amount, p.payment_date, p.payment_method, i.reference AS facture\\n        FROM payments p\\n        JOIN invoices i ON p.invoice_id = i.id\\n        WHERE p.payment_date >= DATE_TRUNC('week', CURRENT_DATE)\\n        ORDER BY p.payment_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements effectués cette semaine ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements effectués cette semaine ?\",\n    \"intention\": \"Gestion financière - Paiements récents\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.amount, p.payment_date, p.payment_method, i.reference AS facture\\n        FROM payments p\\n        JOIN invoices i ON p.invoice_id = i.id\\n        WHERE p.payment_date >= DATE_TRUNC('week', CURRENT_DATE)\\n        ORDER BY p.payment_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets en pause ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets en pause ?\",\n    \"intention\": \"Suivi de projet - Projets en pause\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'en_pause'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quel est l'avancement moyen des projets en cours ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quel est l'avancement moyen des projets en cours ?\",\n    \"intention\": \"Suivi de projet - Avancement moyen\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT ROUND(AVG(progress_percentage), 2) AS avancement_moyen\\n        FROM (\\n            SELECT p.id, p.name,\\n                COUNT(t.id) AS total_tasks,\\n                SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) AS completed_tasks,\\n                CASE \\n                    WHEN COUNT(t.id) = 0 THEN 0\\n                    ELSE ROUND((SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END)::numeric / COUNT(t.id)) * 100, 2)\\n                END as progress_percentage\\n            FROM projects p\\n            LEFT JOIN tasks t ON p.id = t.project_id\\n            WHERE p.status = 'en_cours'\\n            GROUP BY p.id, p.name\\n        ) AS subquery;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés affectés à un projet spécifique ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés affectés à un projet spécifique ?\",\n    \"intention\": \"Ressources humaines - Affectations aux projets\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, p.name AS project_name\\n        FROM staff s\\n        JOIN project_staff ps ON s.id = ps.staff_id\\n        JOIN projects p ON ps.project_id = p.id\\n        WHERE p.id = $1;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements en panne ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements en panne ?\",\n    \"intention\": \"Gestion des équipements - Équipements en panne\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, status, location, maintenance_interval\\n        FROM equipment\\n        WHERE status = 'panne'\\n        ORDER BY name;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs ayant des retards de livraison ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs ayant des retards de livraison ?\",\n    \"intention\": \"Gestion des fournisseurs - Retards de livraison\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, COUNT(o.id) AS commandes_retard\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        WHERE o.actual_delivery_date > o.expected_delivery_date\\n        GROUP BY s.id\\n        ORDER BY commandes_retard DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux les plus chers ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les matériaux les plus chers ?\",\n    \"intention\": \"Gestion des stocks - Matériaux les plus chers\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, description, unit, price, quantity\\n        FROM materials\\n        ORDER BY price DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés ayant pris le plus de congés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés ayant pris le plus de congés ?\",\n    \"intention\": \"Ressources humaines - Absences et congés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, COUNT(ce.id) AS nombre_absences\\n        FROM staff s\\n        JOIN calendar_events ce ON s.id = ce.staff_id\\n        WHERE ce.event_type = 'absence'\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY nombre_absences DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements les plus utilisés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements les plus utilisés ?\",\n    \"intention\": \"Gestion des équipements - Fréquence d'utilisation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT e.id, e.name, COUNT(er.id) AS utilisations_totales\\n        FROM equipment e\\n        JOIN equipment_reservations er ON e.id = er.equipment_id\\n        GROUP BY e.id, e.name\\n        ORDER BY utilisations_totales DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements les plus utilisés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements les plus utilisés ?\",\n    \"intention\": \"Gestion des équipements - Fréquence d'utilisation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT e.id, e.name, COUNT(er.id) AS utilisations_totales\\n        FROM equipment e\\n        JOIN equipment_reservations er ON e.id = er.equipment_id\\n        GROUP BY e.id, e.name\\n        ORDER BY utilisations_totales DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux les plus chers ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les matériaux les plus chers ?\",\n    \"intention\": \"Gestion des stocks - Matériaux les plus chers\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, description, unit, price, quantity\\n        FROM materials\\n        ORDER BY price DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus rentables ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs les plus rentables ?\",\n    \"intention\": \"Analyse fournisseurs - Rentabilité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, SUM(o.total_amount) AS total_depenses\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        GROUP BY s.id, s.name\\n        ORDER BY total_depenses DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés ayant pris le plus de congés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés ayant pris le plus de congés ?\",\n    \"intention\": \"Ressources humaines - Absences et congés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, COUNT(ce.id) AS nombre_absences\\n        FROM staff s\\n        JOIN calendar_events ce ON s.id = ce.staff_id\\n        WHERE ce.event_type = 'absence'\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY nombre_absences DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus rentables ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs les plus rentables ?\",\n    \"intention\": \"Analyse fournisseurs - Rentabilité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, SUM(o.total_amount) AS total_depenses\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        GROUP BY s.id, s.name\\n        ORDER BY total_depenses DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus rentables ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs les plus rentables ?\",\n    \"intention\": \"Analyse fournisseurs - Rentabilité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, SUM(o.total_amount) AS total_depenses\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        GROUP BY s.id, s.name\\n        ORDER BY total_depenses DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets annulés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets annulés ?\",\n    \"intention\": \"Suivi de projet - Projets annulés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'annule'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets annulés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets annulés ?\",\n    \"intention\": \"Suivi de projet - Projets annulés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'annule'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés ayant pris le plus de congés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés ayant pris le plus de congés ?\",\n    \"intention\": \"Ressources humaines - Absences et congés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, COUNT(ce.id) AS nombre_absences\\n        FROM staff s\\n        JOIN calendar_events ce ON s.id = ce.staff_id\\n        WHERE ce.event_type = 'absence'\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY nombre_absences DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les projets annulés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les projets annulés ?\",\n    \"intention\": \"Suivi de projet - Projets annulés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT p.id, p.name, p.start_date, p.end_date, p.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM projects p\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE p.status = 'annule'\\n        ORDER BY p.start_date DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux les plus chers ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les matériaux les plus chers ?\",\n    \"intention\": \"Gestion des stocks - Matériaux les plus chers\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, description, unit, price, quantity\\n        FROM materials\\n        ORDER BY price DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus rentables ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs les plus rentables ?\",\n    \"intention\": \"Analyse fournisseurs - Rentabilité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, SUM(o.total_amount) AS total_depenses\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        GROUP BY s.id, s.name\\n        ORDER BY total_depenses DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements les plus utilisés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements les plus utilisés ?\",\n    \"intention\": \"Gestion des équipements - Fréquence d'utilisation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT e.id, e.name, COUNT(er.id) AS utilisations_totales\\n        FROM equipment e\\n        JOIN equipment_reservations er ON e.id = er.equipment_id\\n        GROUP BY e.id, e.name\\n        ORDER BY utilisations_totales DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés ayant pris le plus de congés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés ayant pris le plus de congés ?\",\n    \"intention\": \"Ressources humaines - Absences et congés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, COUNT(ce.id) AS nombre_absences\\n        FROM staff s\\n        JOIN calendar_events ce ON s.id = ce.staff_id\\n        WHERE ce.event_type = 'absence'\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY nombre_absences DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels employés ont travaillé le plus d'heures ce mois-ci ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels employés ont travaillé le plus d'heures ce mois-ci ?\",\n    \"intention\": \"Ressources humaines - Heures travaillées\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, SUM(te.hours) AS total_heures\\n        FROM staff s\\n        JOIN timesheet_entries te ON s.id = te.staff_id\\n        WHERE EXTRACT(MONTH FROM te.date) = EXTRACT(MONTH FROM CURRENT_DATE)\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY total_heures DESC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les paiements à venir ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les paiements à venir ?\",\n    \"intention\": \"Gestion financière - Paiements à venir\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT i.id, i.reference, i.due_date, i.total_ttc, i.status, \\n               CONCAT(c.firstname, ' ', c.lastname) AS client\\n        FROM invoices i\\n        JOIN projects p ON i.project_id = p.id\\n        JOIN clients c ON p.client_id = c.id\\n        WHERE i.status = 'envoyée'\\n          AND i.due_date > CURRENT_DATE\\n        ORDER BY i.due_date ASC;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés ayant pris le plus de congés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés ayant pris le plus de congés ?\",\n    \"intention\": \"Ressources humaines - Absences et congés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, COUNT(ce.id) AS nombre_absences\\n        FROM staff s\\n        JOIN calendar_events ce ON s.id = ce.staff_id\\n        WHERE ce.event_type = 'absence'\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY nombre_absences DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus rentables ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs les plus rentables ?\",\n    \"intention\": \"Analyse fournisseurs - Rentabilité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, SUM(o.total_amount) AS total_depenses\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        GROUP BY s.id, s.name\\n        ORDER BY total_depenses DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les employés ayant pris le plus de congés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les employés ayant pris le plus de congés ?\",\n    \"intention\": \"Ressources humaines - Absences et congés\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.firstname, s.lastname, COUNT(ce.id) AS nombre_absences\\n        FROM staff s\\n        JOIN calendar_events ce ON s.id = ce.staff_id\\n        WHERE ce.event_type = 'absence'\\n        GROUP BY s.id, s.firstname, s.lastname\\n        ORDER BY nombre_absences DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les matériaux les plus chers ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les matériaux les plus chers ?\",\n    \"intention\": \"Gestion des stocks - Matériaux les plus chers\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT id, name, description, unit, price, quantity\\n        FROM materials\\n        ORDER BY price DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Liste des équipements les plus utilisés ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Liste des équipements les plus utilisés ?\",\n    \"intention\": \"Gestion des équipements - Fréquence d'utilisation\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT e.id, e.name, COUNT(er.id) AS utilisations_totales\\n        FROM equipment e\\n        JOIN equipment_reservations er ON e.id = er.equipment_id\\n        GROUP BY e.id, e.name\\n        ORDER BY utilisations_totales DESC\\n        LIMIT 10;\"\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Générer un rapport sur les dépenses des projets ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Générer un rapport sur les dépenses des projets ?\",\n    \"intention\": \"Analyse financière - Dépenses projets\",\n    \"agent\": \"workflow_agent\",\n    \"requete\": {\n        \"action\": \"generer_rapport\",\n        \"parametres\": {\n            \"periode\": \"mois_dernier\",\n            \"type\": \"depenses\"\n        }\n    }\n}"}]}
{"messages": [{"role": "system", "content": "Vous êtes un assistant d'analyse pour une société de BTP spécialisée dans la construction et rénovation de bâtiments."}, {"role": "user", "content": "Quels sont les fournisseurs les plus rentables ?"}, {"role": "assistant", "content": "{\n    \"question_reformulee\": \"Quels sont les fournisseurs les plus rentables ?\",\n    \"intention\": \"Analyse fournisseurs - Rentabilité\",\n    \"agent\": \"querybuilder\",\n    \"requete\": \"SELECT s.id, s.name, SUM(o.total_amount) AS total_depenses\\n        FROM suppliers s\\n        JOIN supplier_orders o ON s.id = o.supplier_id\\n        GROUP BY s.id, s.name\\n        ORDER BY total_depenses DESC\\n        LIMIT 10;\"\n}"}]}
